(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{118:function(e,t){},120:function(e,t){},135:function(e,t,a){},136:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(9),r=a.n(c),i=a(29),l=a(176),o=a(171),s=a(166),d=a(169),j=a(137),u=a(26),b=a(84),m=a(59),x=a.n(m),p=a(4),O=Object(n.createContext)(),f=Object(b.a)("http://localhost:5000"),h=function(e){var t=e.children,a=Object(n.useState)(null),c=Object(u.a)(a,2),r=c[0],i=c[1],l=Object(n.useState)(""),o=Object(u.a)(l,2),s=o[0],d=o[1],j=Object(n.useState)({}),b=Object(u.a)(j,2),m=b[0],h=b[1],g=Object(n.useState)(!1),v=Object(u.a)(g,2),C=v[0],w=v[1],y=Object(n.useState)(!1),N=Object(u.a)(y,2),k=N[0],I=N[1],S=Object(n.useState)(""),D=Object(u.a)(S,2),B=D[0],R=D[1],A=Object(n.useRef)(),V=Object(n.useRef)(),E=Object(n.useRef)();Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){i(e),A.current.srcObject=e})),f.on("me",(function(e){return d(e)})),f.on("calluser",(function(e){var t=e.from,a=e.name,n=e.signal;h({isReceivedCall:!0,from:t,name:a,signal:n})}))}),[]);return Object(p.jsx)(O.Provider,{value:{call:m,callAccepted:C,myVideo:A,userVideo:V,stream:r,name:B,setName:R,callEnded:k,me:s,callUser:function(e){var t=new x.a({initiator:!0,trickle:!1,stream:r});t.on("signal",(function(t){f.emit("calluser",{userToCall:e,signalData:t,from:s,name:B})})),t.on("stream",(function(e){V.current.srcObject=e})),f.on("callaccepted",(function(e){w(!0),t.signal(e)})),E.current=t},leaveCall:function(){I(!0),E.current.destroy(),window.location.reload()},answerCall:function(){w(!0);var e=new x.a({initiator:!1,trickle:!1,stream:r});e.on("signal",(function(e){f.emit("answercall",{signal:e,to:m.from})})),e.on("stream",(function(e){V.current.srcObject=e})),e.signal(m.signal),E.current=e}},children:t})},g=Object(s.a)((function(e){return{video:Object(i.a)({width:"550px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(i.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{padding:"25px",border:"1px solid #30373d",backgroundColor:"#161b22",color:"#c9d1d9",margin:"10px"}}})),v=function(e){var t=Object(n.useContext)(O),a=t.name,c=t.callAccepted,r=t.myVideo,i=t.userVideo,l=t.callEnded,s=t.stream,u=t.call,b=g();return Object(p.jsxs)(d.a,{container:!0,className:b.gridContainer,children:[s&&Object(p.jsx)(j.a,{className:b.paper,children:Object(p.jsxs)(d.a,{item:!0,xs:12,md:6,children:[Object(p.jsx)(o.a,{variant:"h5",gutterBottom:!0,children:a||"Name"}),Object(p.jsx)("video",{playsInline:!0,muted:!0,ref:r,autoPlay:!0,className:b.video})]})}),c&&!l&&Object(p.jsx)(j.a,{className:b.paper,children:Object(p.jsxs)(d.a,{item:!0,xs:12,md:6,children:[Object(p.jsx)(o.a,{variant:"h5",gutterBottom:!0,children:u.name}),Object(p.jsx)("video",{playsInline:!0,ref:i,autoPlay:!0,className:b.video})]})})]})},C=a(178),w=function(e){var t=Object(n.useContext)(O),a=t.answerCall,c=t.call,r=t.callAccepted;return Object(p.jsx)(p.Fragment,{children:c.isReceivedCall&&!r&&Object(p.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(p.jsxs)("h1",{children:[c.name," is calling: "]}),Object(p.jsx)(C.a,{variant:"contained",color:"primary",onClick:a,children:"Answer"})]})})},y=a(172),N=a(177),k=a(83),I=a(173),S=a(174),D=a(175),B=Object(s.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(i.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(i.a)({width:"585px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px",border:"1px solid #30373d",backgroundColor:"#d6d6d6",color:"#161b22"},textfield:{backgroundColor:"#d6d6d6",borderRadius:5}}})),R=function(e){var t=Object(n.useContext)(O),a=t.me,c=t.callAccepted,r=t.name,i=t.setName,l=t.callEnded,s=t.leaveCall,b=t.callUser,m=Object(n.useState)(""),x=Object(u.a)(m,2),f=x[0],h=x[1],g=B();return Object(p.jsx)(y.a,{className:g.container,children:Object(p.jsxs)(j.a,{elevation:10,className:g.paper,children:[Object(p.jsx)("form",{className:g.root,noValidate:!0,autoComplete:"off",children:Object(p.jsxs)(d.a,{container:!0,className:g.gridContainer,children:[Object(p.jsxs)(d.a,{item:!0,xs:12,md:6,className:g.padding,children:[Object(p.jsx)(o.a,{gutterBottom:!0,variant:"h6",children:"Account Info"}),Object(p.jsx)(N.a,{label:"Name",value:r,onChange:function(e){return i(e.target.value)},variant:"outlined",className:g.textfield,fullWidth:!0}),Object(p.jsx)(k.CopyToClipboard,{text:a,className:g.margin,children:Object(p.jsx)(C.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(p.jsx)(I.a,{fontSize:"large"}),children:"Copy Your ID"})})]}),Object(p.jsxs)(d.a,{item:!0,xs:12,md:6,className:g.padding,children:[Object(p.jsx)(o.a,{gutterBottom:!0,variant:"h6",children:"Make a call"}),Object(p.jsx)(N.a,{label:"ID to Call",value:f,onChange:function(e){return h(e.target.value)},variant:"outlined",className:g.textfield,fullWidth:!0}),c&&!l?Object(p.jsx)(C.a,{variant:"contained",color:"secondary",startIcon:Object(p.jsx)(S.a,{fontSize:"large"}),fullWidth:!0,onClick:s,className:g.margin,children:"Hang Up"}):Object(p.jsx)(C.a,{variant:"contained",color:"primary",startIcon:Object(p.jsx)(D.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return b(f)},className:g.margin,children:"Call"})]})]})}),e.children]})})},A=Object(s.a)((function(e){return{appBar:Object(i.a)({borderRadius:5,margin:"30px 100px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:"5px",width:"600px",border:"1px solid #30373d",backgroundColor:"#161b22",color:"#c9d1d9"},e.breakpoints.down("xs"),{width:"90%"}),wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),V=function(){var e=A();return Object(p.jsxs)("div",{className:e.wrapper,children:[Object(p.jsx)(l.a,{className:e.appBar,position:"static",color:"inherit",children:Object(p.jsx)(o.a,{variant:"h4",align:"center",children:"Video Chat"})}),Object(p.jsx)(v,{}),Object(p.jsx)(R,{children:Object(p.jsx)(w,{})})]})};a(135);r.a.render(Object(p.jsx)(h,{children:Object(p.jsx)(V,{})}),document.getElementById("root"))}},[[136,1,2]]]);
//# sourceMappingURL=main.ef8bbcee.chunk.js.map